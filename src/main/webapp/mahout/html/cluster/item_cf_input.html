<link href="../../../static/jslib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link href="../../../static/jslib/fontawesome4.2/css/font-awesome.css" rel="stylesheet">
<script src="../../../static/jslib/jquery/jquery-1.11.2.min.js"></script>
<script src="../../../static/jslib/bootstrap/js/bootstrap.min.js"></script>
<script src = "../../../static/js/util.js"></script>

<script>
    function runItemCF()
    {
        $.ajax({
            type: "POST",
            url: getContextPath() + "/ItemCFController/runItemCF",
            data: {
                input : $('#input').val() ,
                output : $('#output').val() ,
                similarityClassname : $('#similarityClassname').val(),
                outputPathForSimilarityMatrix : $('#outputPathForSimilarityMatrix').val() ,
                usersFile : $('#usersFile').val(),
                itemsFile : $('#itemsFile').val(),
                filterFile : $('#filterFile').val(),
                numRecommendations : $('#numRecommendations').val(),
                booleanData : $('#booleanData').val(),
                maxPrefsPerUser : $('#maxPrefsPerUser').val(),
                maxSimilaritiesPerItem : $('#maxSimilaritiesPerItem').val(),
                minPrefsPerUser : $('#minPrefsPerUser').val(),
                maxPrefsPerUserInItemSimilarity : $('#maxPrefsPerUserInItemSimilarity').val(),
                threshold : $('#threshold').val()
            },
            success: function (data) {
                alert(data.result);
            }
        });
    }
</script>
<div style="padding: 10px 0px 0px 10px">
    <legend>必须输入选项</legend>
    <table>
        <tr>
            <td style="width:100px;word-break:break-all; word-wrap:break-word;"><label class="control-label" for="input">input(path):</label></td>
            <td><input type="text" id="input" style="width:300px;height:30px" maxlength="300" value="/itemcf/input" placeholder="存储用户偏好数据的目录"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="output">output(path):</label></td>
            <td><input type="text" id="output" style="width:300px;height:30px" maxlength="300" value="/itemcf/output/result/" placeholder="结算结果的输出目录"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="outputPathForSimilarityMatrix">outputPathForSimilarityMatrix(path):</label></td>
            <td><input type="text" id="outputPathForSimilarityMatrix" style="width:300px;height:30px" maxlength="300" value="/itemcf/output/matrix" placeholder="相似矩阵输出目录"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="similarityClassname">similarityClassname(classname):</label></td>
            <td><select id="similarityClassname" style="width:300px;height:30px">
                <option value="CityBlockSimilarity">CityBlockSimilarity</option>
                <option value="CooccurrenceCountSimilarity">CooccurrenceCountSimilarity</option>
                <option value="CosineSimilarity">CosineSimilarity</option>
                <option value="CosineSimilarity">CountbasedMeasure</option>
                <option value="SIMILARITY_EUCLIDEAN_DISTANCE" selected = "selected">EuclideanDistanceSimilarity</option>
                <option value="LoglikelihoodSimilarity">LoglikelihoodSimilarity</option>
                <option value="PearsonCorrelationSimilarity">PearsonCorrelationSimilarity</option>
                <option value="TanimotoCoefficientSimilarity">TanimotoCoefficientSimilarity</option>
            </select></td>
        </tr>
    </table>
    <legend>可选输入选项</legend>
    <table>
        <tr>
            <td style="width:100px;word-break:break-all; word-wrap:break-word;"><label class="control-label" for="output"><label class="control-label" for="usersFile">usersFile(path):</label></label></td>
            <td><input type="text" id="usersFile" style="width:300px;height:30px" placeholder="指定一个包含了一个或多个存储userID的文件路径，仅为该路径下所有文件包含的userID做推荐计算 (该选项可选)"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="itemsFile">itemsFile(path):</label></td>
            <td><input type="text" id="itemsFile" style="width:300px;height:30px" placeholder="指定一个包含了一个或多个存储itemID的文件路径，仅为该路径下所有文件包含的itemID做推荐计算  (该选项可选)"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="filterFile">filterFile(path):</label></td>
            <td><input type="text" id="filterFile" style="width:300px;height:30px" placeholder="指定一个路径，该路径下的文件包含了[userID,itemID]值对，userID和itemID用逗号分隔。计算结果将不会为user推荐[userID,itemID]值对中包含的item  (该选项可选)"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="numRecommendations">numRecommendations(integer):</label></td>
            <td><input type="text" id="numRecommendations" style="width:300px;height:30px" placeholder="为每个用户推荐的item数量，默认为10"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="booleanData">booleanData(boolean):</label></td>
            <td><input type="text" id="booleanData" style="width:300px;height:30px" placeholder="如果输入数据不包含偏好数值，则将该参数设置为true ，默认为false"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="maxPrefsPerUser">maxPrefsPerUser(integer):</label></td>
            <td><input type="text" id="maxPrefsPerUser" style="width:300px;height:30px" placeholder="在最后计算推荐结果的阶段，针对每一个user使用的偏好数据的最大数量，默认为10"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="maxSimilaritiesPerItem">maxSimilaritiesPerItem(integer):</label></td>
            <td><input type="text" id="maxSimilaritiesPerItem" style="width:300px;height:30px" placeholder="针对每个item的相似度最大值，默认为100"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="minPrefsPerUser">minPrefsPerUser(integer):</label></td>
            <td><input type="text" id="minPrefsPerUser" style="width:300px;height:30px" placeholder="在相似度计算中，忽略所有偏好数据量少于该值的用户，默认为1"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="maxPrefsPerUserInItemSimilarity">maxPrefsPerUserInItemSimilarity(integer):</label></td>
            <td><input type="text" id="maxPrefsPerUserInItemSimilarity" style="width:300px;height:30px" placeholder="在item相似度计算阶段，针对每个用户考虑的偏好数据最大数量，默认为1000"></td>
        </tr>
        <tr>
            <td><label class="control-label" for="threshold">threshold(double):</label></td>
            <td><input type="text" id="threshold" style="width:300px;height:30px" placeholder="忽略相似度低于该阀值的item对"></td>
        </tr>
    </table>

    <button class="btn btn-primary" onclick="runItemCF()">提交集群运行</button>
    <button class="btn btn-success" style="padding-left: 20px" >本地模式运行</button>
</div>
